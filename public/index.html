<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HiChat ‚Äî –Ω–µ–æ–Ω–æ–≤—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <!-- ========== SIDEBAR ========== -->
    <div class="sidebar">
      <div class="top">
        <div style="display: flex; align-items: center; gap: 8px;">
          <h2 id="logo" class="logo">HiChat</h2>
          <button id="settingsBtn" class="btn-icon" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
        </div>
        <div id="currentUserInfo" class="current-user hidden">
          <img id="myAvatar" src="" class="avatar-small" alt="avatar" />
          <div id="myName"></div>
        </div>
      </div>

      <!-- –ë–ª–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ -->
      <div class="new-chat-block">
        <input id="newChatUsername" placeholder="–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç ‚Äî –≤–≤–µ–¥–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º" />
        <button id="startChatBtn">–ù–∞—á–∞—Ç—å —á–∞—Ç</button>
      </div>

      <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
      <div id="chatsContainer" class="chats-list"></div>

      <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
      <div class="sidebar-bottom">
        <button id="logoutBtn" class="btn-ghost hidden">–í—ã–π—Ç–∏</button>
      </div>
    </div>

    <!-- ========== –û–°–ù–û–í–ù–ê–Ø –û–ë–õ–ê–°–¢–¨ –ß–ê–¢–ê ========== -->
    <div class="chat-area">
      <!-- –®–∞–ø–∫–∞ —á–∞—Ç–∞ (–∏–º—è, –∞–≤–∞—Ç–∞—Ä, –ø–æ–∏—Å–∫) -->
      <div id="chatHeader" class="chat-header hidden">
        <div style="position:relative;">
          <img id="chatAvatar" class="avatar-small" src="" alt="avatar" />
          <span id="chatOnlineDot" class="online-dot hidden"></span>
        </div>
        <div style="flex:1;">
          <div id="chatName" style="font-weight:700; cursor:pointer;">&nbsp;</div>
          <small id="chatSub" style="opacity:.7"></small>
        </div>
        <!-- –ü–æ–∏—Å–∫ –ø–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º -->
        <div style="display: flex; align-items: center; gap: 8px;">
          <button id="searchToggleBtn" class="btn-icon" title="–ü–æ–∏—Å–∫ –≤ —á–∞—Ç–µ">üîç</button>
          <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫..." class="hidden" 
                 style="padding: 6px 12px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); background: rgba(0,0,0,0.3); color: white; width: 160px;">
        </div>
      </div>

      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π -->
      <div id="messages" class="messages"></div>

      <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è -->
      <div class="input-area">
        <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." />
        <button id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ù–ê–°–¢–†–û–ï–ö –ü–†–û–§–ò–õ–Ø ========== -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <h2 style="margin-bottom: 20px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h2>
      <form id="settingsForm" enctype="multipart/form-data">
        <input type="text" id="settingsUsername" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required />
        <textarea id="settingsBio" placeholder="–û —Å–µ–±–µ (–±–∏–æ)" rows="3"></textarea>

        <div class="avatar-upload">
          <label for="settingsAvatar" class="file-label">üì∏ –°–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä</label>
          <input type="file" id="settingsAvatar" accept="image/*" />
          <div id="settingsAvatarPreview" class="avatar-preview hidden">
            <img src="" alt="preview" />
          </div>
        </div>

        <div style="display: flex; gap: 12px; margin-top: 16px;">
          <button type="submit" class="btn-gradient">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button type="button" id="closeSettingsBtn" class="btn-ghost">–û—Ç–º–µ–Ω–∞</button>
        </div>
        <p id="settingsError" class="error-text"></p>
      </form>

      <!-- –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å -->
      <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.05);">
        <button id="copyProfileLinkBtn" class="btn-ghost" style="width:100%;">
          üîó –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å
        </button>
        <p id="copyLinkMessage" class="error-text" style="color:#2fff8a; text-align:center;"></p>
      </div>
    </div>
  </div>

  <!-- ========== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–°–ú–û–¢–†–ê –ü–†–û–§–ò–õ–Ø ========== -->
  <div id="profileModal" class="modal hidden">
    <div class="modal-content profile-view">
      <div style="display: flex; align-items: center; gap: 16px;">
        <img id="profileAvatar" class="avatar-large" src="" alt="avatar" />
        <div>
          <h2 id="profileUsername"></h2>
          <span id="profileOnline" class="online-status"></span>
        </div>
      </div>
      <div id="profileBio" class="profile-bio"></div>
      <button id="closeProfileBtn" class="btn-ghost" style="margin-top: 20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>

  <!-- ========== –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –°–ö–†–ò–ü–¢–û–í ========== -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="script.js"></script>
</body>
</html>
